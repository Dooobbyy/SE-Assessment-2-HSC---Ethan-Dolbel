{% extends 'base.html' %}

{% block title %}Scenario Modeling - Real Estate Finance Tracker{% endblock %}

{% block content %}
<div class="main-content">
    <div class="properties-page">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h1>Scenario Modeling</h1>
            <a href="{% url 'tools_home' %}" class="btn-negative" style="text-decoration: none; padding: 10px 16px; border-radius: 6px;">Back to Tools</a>
        </div>
        
        <div class="card">
            <h3>Compare Market Scenarios</h3>
            <form method="post">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="property">Select Property:</label>
                    <select name="property" id="property" class="form-control">
                        <option value="">Select a property</option>
                        {% for prop in properties %}
                            <option value="{{ prop.id }}">{{ prop.address }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="years_ahead">Years to Project:</label>
                    <input type="number" name="years_ahead" id="years_ahead" class="form-control" min="1" max="30" value="5">
                </div>
                
                <button type="submit" class="btn-accent">Compare Scenarios</button>
            </form>
        </div>
        
        {% if show_results %}
        <div class="card">
            <h3>Scenario Comparison for {{ results.0.property.address }}</h3>
            <p>Projecting {{ results.0.years_ahead }} years ahead</p>
            
            <div style="overflow-x: auto;">
                <table class="property-table">
                    <thead>
                        <tr>
                            <th>Scenario</th>
                            <th>Growth Rate</th>
                            <th>Current Value</th>
                            <th>Future Value</th>
                            <th>ROI</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for result in results %}
                        <tr>
                            <td>{{ result.scenario.name }}</td>
                            <td>{{ result.scenario.rate|floatformat:2 }}%</td>
                            <td>${{ result.current_value|floatformat:2 }}</td>
                            <td style="color: var(--color-gold);">${{ result.future_value|floatformat:2 }}</td>
                            <td style="color: {% if result.roi >= 0 %}var(--color-positive){% else %}var(--color-negative){% endif %};">
                                {{ result.roi|floatformat:2 }}%
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        {% endif %}
        
        <div class="card">
            <h3>Common Market Scenarios</h3>
            <ul>
                <li><strong>Conservative (2%):</strong> Slow, steady growth typical of stable markets</li>
                <li><strong>Moderate (3.5%):</strong> Average historical real estate appreciation</li>
                <li><strong>Aggressive (6%):</strong> Strong market growth, possibly in booming areas</li>
                <li><strong>Decline (-2%):</strong> Market correction or economic downturn</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}